## 寄存器与内存

### 寄存器

存储器：CPU>内存>硬盘

#### 通用寄存器

- 32位的通用寄存器只有8个

![image-20210311171802282](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210311171804657-1763217171.png) 

存值范围在 0 - FFFFFFFF

对于二进制来说，直接修改值

#### 指令

```shell
mov 存的地址,存的值
mov 存的地址1,存的地址2			# 相当于 地址1=地址2
```

![image-20210311212304133](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210311212304959-1309139734.png)

![image-20210311212327316](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210311212327640-1217791805.png)

可以将数字写到寄存器中,可以将寄存器中的值写到寄存器。

#### 不同的寄存器

```shell
		 FFFF	 	  FF
32位		16位			8位
EAX		 AX		 低：AL	高：AH
ECX 	 CX		 低：CL	高：BH
EDX		 DX		 低：DL	高：CH
EBX		 BX		 低：BL	高：DH
ESP		 SP		 
ENP		 NP		 
ESI		 SI		 
EDI		 DI		 
```

- 32位的寄存器有 **8** 个数 且能 **向下兼容** 16位和8位，16位操作寄存器 **后4位数** ，8位操作寄存器 **中的2位数**

- 32位中的8位分为 **高8位和低8位** ，高8位操作32位寄存器中的5、6位，低8位操作32位寄存器中的后两位

![image-20210311232906829](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210311232907978-1633616227.png)

除了这些通用寄存器之外，那么其他的寄存器每一位都有自己特定的功能！



### 内存

内存器很小，不够用。所以说，数据放到内存中！

平时买的内存条

每个应用程序进程都有4GB的内存空间（空头支票）

当程序真正运行的时候，才能用到物理内存

1B = 8bit

1KB = 1024B

1Mb = 1024KB

1GB = 1024MB

4G的内存，4096M ==> 转化为位（bit），就是可以存储的最大容量，十分大

#### 内存地址

计算机中内存地址很多，空间很大，所以需要给空间取名，才便于寻找

![image-20210312000245383](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210312000246415-1637823155.png)

这些给内存起的编号，就是 **内存地址** 。32位 8个16进制的值

32位：寻址能力的极限为4GB，即32位的电脑最多可以用4GB的内存条，为什么呢？

```shell
# 32位8个16进制的值，能表示
FFFFFFFF + 1 = 100000000(十六进制) 个地址
100000000 内存地址 * 8 = 800000000 bit
# 转换为10进制为
34359738368bit
4294967296B
...
4GB
# 所以，1位就为16B
```

那么64位的寻址能力就为：**4294967296GB** 以目前的计算机来说，是绰绰有余的

每个内存地址都有一个编号，可以通过这些编号向里面存值！

![image-20210312002823750](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210312002824763-1507317598.png) 

> 内存如何存值？

不是任意的地址都可以使用的，需要申请使用，只有程序申请过的内存，才可以使用

```shell
# 汇编如和向内存中写值
MOV BYTE PTR DS:[113F058],DL	
# BYTE(只能操作寄存器中的后两位)，所以值的范围不能超过两个FF(十六进制)
# 113F058为内存地址，这个地址可以有加减，也可以为一个寄存器
# 由于是BYTE，所以只能用8位寄存器来向内存中存值
```

- **==MOV 数据宽度 PTR DS:[内存地址],值(或者是寄存器)==** 
- 数据宽度：**byte  word  dword qword** 分别对应 **8位 16位 32位 64位** ，传递值的大小与数据宽度相关
- 地址的位置：0xFFFFFFFF

地址           值

![image-20210312004737795](https://img2020.cnblogs.com/blog/2213660/202103/2213660-20210312004738854-1865814546.png) 

**内存地址的写法** 

ds:[113F058]

ds:[113F058+4] 	内存地址偏移

ds:[eax]			寄存器

ds:[eax+4]			寄存器偏移

ds:[reg+reg*{1,2,4,8}]		数组

ds:[reg+reg*{1,2,4,8}+4]		数组偏移

> 从内存中取值

```shell
# 从内存中取值就必须要用到寄存器，也是用mov,用法和存值大同小异
MOV EAX,DWORD PTR SS:[113F058]
```

